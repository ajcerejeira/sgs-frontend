webpackJsonp([1],{397:function(n,l,e){"use strict";function t(n){return s["ɵvid"](0,[(n()(),s["ɵeld"](0,0,null,null,2,"ion-option",[],null,null,null,null,null)),s["ɵdid"](1,16384,[[9,4]],0,q.a,[s.ElementRef],null,null),(n()(),s["ɵted"](2,null,["",""]))],null,function(n,l){n(l,2,0,l.context.$implicit.meta.register)})}function i(n){return s["ɵvid"](0,[(n()(),s["ɵeld"](0,0,null,null,2,"ion-option",[],null,null,null,null,null)),s["ɵdid"](1,16384,[[13,4]],0,q.a,[s.ElementRef],null,null),(n()(),s["ɵted"](2,null,["",""]))],null,function(n,l){n(l,2,0,l.context.$implicit)})}function o(n){return s["ɵvid"](0,[(n()(),s["ɵeld"](0,0,null,null,2,"ion-option",[],null,null,null,null,null)),s["ɵdid"](1,16384,[[17,4]],0,q.a,[s.ElementRef],null,null),(n()(),s["ɵted"](2,null,["",""]))],null,function(n,l){n(l,2,0,l.context.$implicit)})}function a(n){return s["ɵvid"](0,[s["ɵqud"](402653184,1,{vehicleRef:0}),s["ɵqud"](402653184,2,{actorRef:0}),s["ɵqud"](402653184,3,{signRef:0}),(n()(),s["ɵted"](-1,null,["\n"])),(n()(),s["ɵeld"](4,0,null,null,42,"ion-header",[],null,null,null,null,null)),s["ɵdid"](5,16384,null,0,I.a,[S.a,s.ElementRef,s.Renderer,[2,_.a]],null,null),(n()(),s["ɵted"](-1,null,["\n  "])),(n()(),s["ɵeld"](7,0,null,null,38,"ion-navbar",[["class","toolbar"],["color","primary"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,w.b,w.a)),s["ɵdid"](8,49152,null,0,O.a,[T.a,[2,_.a],[2,A.a],S.a,s.ElementRef,s.Renderer],{color:[0,"color"]},null),(n()(),s["ɵted"](-1,3,["\n    "])),(n()(),s["ɵeld"](10,0,null,0,8,"button",[["ion-button",""],["menuToggle",""]],[[8,"hidden",0]],[[null,"click"]],function(n,l,e){var t=!0;if("click"===l){t=!1!==s["ɵnov"](n,12).toggle()&&t}return t},L.b,L.a)),s["ɵdid"](11,1097728,[[4,4]],0,M.a,[[8,""],S.a,s.ElementRef,s.Renderer],null,null),s["ɵdid"](12,1064960,null,0,D.a,[V.a,[2,_.a],[2,M.a],[2,O.a]],{menuToggle:[0,"menuToggle"]},null),s["ɵdid"](13,16384,null,1,N.a,[S.a,s.ElementRef,s.Renderer,[2,F.a],[2,O.a]],null,null),s["ɵqud"](603979776,4,{_buttons:1}),(n()(),s["ɵted"](-1,0,["\n      "])),(n()(),s["ɵeld"](16,0,null,0,1,"ion-icon",[["name","menu"],["role","img"]],[[2,"hide",null]],null,null,null,null)),s["ɵdid"](17,147456,null,0,x.a,[S.a,s.ElementRef,s.Renderer],{name:[0,"name"]},null),(n()(),s["ɵted"](-1,0,["\n    "])),(n()(),s["ɵted"](-1,3,["\n    "])),(n()(),s["ɵeld"](20,0,null,3,2,"ion-title",[],null,null,null,J.b,J.a)),s["ɵdid"](21,49152,null,0,j.a,[S.a,s.ElementRef,s.Renderer,[2,F.a],[2,O.a]],null,null),(n()(),s["ɵted"](-1,0,["Croqui digital"])),(n()(),s["ɵted"](-1,3,["\n    "])),(n()(),s["ɵeld"](24,0,null,2,20,"ion-buttons",[["end",""]],null,null,null,null,null)),s["ɵdid"](25,16384,null,1,N.a,[S.a,s.ElementRef,s.Renderer,[2,F.a],[2,O.a]],null,null),s["ɵqud"](603979776,5,{_buttons:1}),(n()(),s["ɵted"](-1,null,["\n      "])),(n()(),s["ɵted"](-1,null,["\n      "])),(n()(),s["ɵted"](-1,null,["\n      "])),(n()(),s["ɵted"](-1,null,["\n      "])),(n()(),s["ɵeld"](31,0,null,null,5,"button",[["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(n,l,e){var t=!0;if("click"===l){t=!1!==n.component.saveSketch()&&t}return t},L.b,L.a)),s["ɵdid"](32,1097728,[[5,4]],0,M.a,[[8,""],S.a,s.ElementRef,s.Renderer],null,null),(n()(),s["ɵted"](-1,0,["\n        "])),(n()(),s["ɵeld"](34,0,null,0,1,"ion-icon",[["name","checkmark-circle"],["role","img"]],[[2,"hide",null]],null,null,null,null)),s["ɵdid"](35,147456,null,0,x.a,[S.a,s.ElementRef,s.Renderer],{name:[0,"name"]},null),(n()(),s["ɵted"](-1,0,["\n      "])),(n()(),s["ɵted"](-1,null,["\n      "])),(n()(),s["ɵeld"](38,0,null,null,5,"button",[["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(n,l,e){var t=!0;if("click"===l){t=!1!==n.component.confirmDelete()&&t}return t},L.b,L.a)),s["ɵdid"](39,1097728,[[5,4]],0,M.a,[[8,""],S.a,s.ElementRef,s.Renderer],null,null),(n()(),s["ɵted"](-1,0,["\n        "])),(n()(),s["ɵeld"](41,0,null,0,1,"ion-icon",[["name","trash"],["role","img"]],[[2,"hide",null]],null,null,null,null)),s["ɵdid"](42,147456,null,0,x.a,[S.a,s.ElementRef,s.Renderer],{name:[0,"name"]},null),(n()(),s["ɵted"](-1,0,["\n      "])),(n()(),s["ɵted"](-1,null,["\n    "])),(n()(),s["ɵted"](-1,3,["\n  "])),(n()(),s["ɵted"](-1,null,["\n"])),(n()(),s["ɵted"](-1,null,["\n\n"])),(n()(),s["ɵeld"](48,0,null,null,23,"ion-item",[["class","item item-block"]],null,null,null,H.b,H.a)),s["ɵdid"](49,1097728,null,3,z.a,[G.a,S.a,s.ElementRef,s.Renderer,[2,W.a]],null,null),s["ɵqud"](335544320,6,{contentLabel:0}),s["ɵqud"](603979776,7,{_buttons:1}),s["ɵqud"](603979776,8,{_icons:1}),s["ɵdid"](53,16384,null,0,K.a,[],null,null),(n()(),s["ɵted"](-1,2,["\n  "])),(n()(),s["ɵeld"](55,0,null,1,2,"ion-label",[],null,null,null,null,null)),s["ɵdid"](56,16384,[[6,4]],0,Z.a,[S.a,s.ElementRef,s.Renderer,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),s["ɵted"](-1,null,["Veículo"])),(n()(),s["ɵted"](-1,2,["\n  "])),(n()(),s["ɵeld"](59,0,null,3,11,"ion-select",[],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"keyup.space"]],function(n,l,e){var t=!0,i=n.component;if("click"===l){t=!1!==s["ɵnov"](n,60)._click(e)&&t}if("keyup.space"===l){t=!1!==s["ɵnov"](n,60)._keyup()&&t}if("ngModelChange"===l){t=!1!==(i.chosenVehicle=e)&&t}if("ngModelChange"===l){t=!1!==i.onOkVehicle(i.chosenVehicle)&&t}return t},$.b,$.a)),s["ɵdid"](60,1228800,[[1,4],["vehicleSelect",4]],1,U.a,[T.a,G.a,S.a,s.ElementRef,s.Renderer,[2,z.a],B.a],null,null),s["ɵqud"](603979776,9,{options:1}),s["ɵprd"](1024,null,Q.i,function(n){return[n]},[U.a]),s["ɵdid"](63,671744,null,0,Q.n,[[8,null],[8,null],[8,null],[2,Q.i]],{model:[0,"model"]},{update:"ngModelChange"}),s["ɵprd"](2048,null,Q.j,null,[Q.n]),s["ɵdid"](65,16384,null,0,Q.k,[Q.j],null,null),(n()(),s["ɵted"](-1,null,["\n    "])),(n()(),s["ɵted"](-1,null,["\n    "])),(n()(),s["ɵand"](16777216,null,null,1,null,t)),s["ɵdid"](69,802816,null,0,X.h,[s.ViewContainerRef,s.TemplateRef,s.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),s["ɵted"](-1,null,["\n  "])),(n()(),s["ɵted"](-1,2,["\n"])),(n()(),s["ɵted"](-1,null,["\n\n"])),(n()(),s["ɵeld"](73,0,null,null,23,"ion-item",[["class","item item-block"]],null,null,null,H.b,H.a)),s["ɵdid"](74,1097728,null,3,z.a,[G.a,S.a,s.ElementRef,s.Renderer,[2,W.a]],null,null),s["ɵqud"](335544320,10,{contentLabel:0}),s["ɵqud"](603979776,11,{_buttons:1}),s["ɵqud"](603979776,12,{_icons:1}),s["ɵdid"](78,16384,null,0,K.a,[],null,null),(n()(),s["ɵted"](-1,2,["\n    "])),(n()(),s["ɵeld"](80,0,null,1,2,"ion-label",[],null,null,null,null,null)),s["ɵdid"](81,16384,[[10,4]],0,Z.a,[S.a,s.ElementRef,s.Renderer,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),s["ɵted"](-1,null,["Intervenientes"])),(n()(),s["ɵted"](-1,2,["\n    "])),(n()(),s["ɵeld"](84,0,null,3,11,"ion-select",[],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"keyup.space"]],function(n,l,e){var t=!0,i=n.component;if("click"===l){t=!1!==s["ɵnov"](n,85)._click(e)&&t}if("keyup.space"===l){t=!1!==s["ɵnov"](n,85)._keyup()&&t}if("ngModelChange"===l){t=!1!==(i.chosenActor=e)&&t}if("ngModelChange"===l){t=!1!==i.onOkActor(i.chosenActor)&&t}return t},$.b,$.a)),s["ɵdid"](85,1228800,[[2,4],["actorSelect",4]],1,U.a,[T.a,G.a,S.a,s.ElementRef,s.Renderer,[2,z.a],B.a],null,null),s["ɵqud"](603979776,13,{options:1}),s["ɵprd"](1024,null,Q.i,function(n){return[n]},[U.a]),s["ɵdid"](88,671744,null,0,Q.n,[[8,null],[8,null],[8,null],[2,Q.i]],{model:[0,"model"]},{update:"ngModelChange"}),s["ɵprd"](2048,null,Q.j,null,[Q.n]),s["ɵdid"](90,16384,null,0,Q.k,[Q.j],null,null),(n()(),s["ɵted"](-1,null,["\n      "])),(n()(),s["ɵted"](-1,null,["\n      "])),(n()(),s["ɵand"](16777216,null,null,1,null,i)),s["ɵdid"](94,802816,null,0,X.h,[s.ViewContainerRef,s.TemplateRef,s.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),s["ɵted"](-1,null,["\n    "])),(n()(),s["ɵted"](-1,2,["\n  "])),(n()(),s["ɵted"](-1,null,["\n\n"])),(n()(),s["ɵeld"](98,0,null,null,23,"ion-item",[["class","item item-block"]],null,null,null,H.b,H.a)),s["ɵdid"](99,1097728,null,3,z.a,[G.a,S.a,s.ElementRef,s.Renderer,[2,W.a]],null,null),s["ɵqud"](335544320,14,{contentLabel:0}),s["ɵqud"](603979776,15,{_buttons:1}),s["ɵqud"](603979776,16,{_icons:1}),s["ɵdid"](103,16384,null,0,K.a,[],null,null),(n()(),s["ɵted"](-1,2,["\n  "])),(n()(),s["ɵeld"](105,0,null,1,2,"ion-label",[],null,null,null,null,null)),s["ɵdid"](106,16384,[[14,4]],0,Z.a,[S.a,s.ElementRef,s.Renderer,[8,null],[8,null],[8,null],[8,null]],null,null),(n()(),s["ɵted"](-1,null,["Sinal de trânsito"])),(n()(),s["ɵted"](-1,2,["\n  "])),(n()(),s["ɵeld"](109,0,null,3,11,"ion-select",[],[[2,"select-disabled",null],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"click"],[null,"keyup.space"]],function(n,l,e){var t=!0,i=n.component;if("click"===l){t=!1!==s["ɵnov"](n,110)._click(e)&&t}if("keyup.space"===l){t=!1!==s["ɵnov"](n,110)._keyup()&&t}if("ngModelChange"===l){t=!1!==(i.chosenSign=e)&&t}if("ngModelChange"===l){t=!1!==i.onOkSign(i.chosenSign)&&t}return t},$.b,$.a)),s["ɵdid"](110,1228800,[[3,4],["signSelect",4]],1,U.a,[T.a,G.a,S.a,s.ElementRef,s.Renderer,[2,z.a],B.a],null,null),s["ɵqud"](603979776,17,{options:1}),s["ɵprd"](1024,null,Q.i,function(n){return[n]},[U.a]),s["ɵdid"](113,671744,null,0,Q.n,[[8,null],[8,null],[8,null],[2,Q.i]],{model:[0,"model"]},{update:"ngModelChange"}),s["ɵprd"](2048,null,Q.j,null,[Q.n]),s["ɵdid"](115,16384,null,0,Q.k,[Q.j],null,null),(n()(),s["ɵted"](-1,null,["\n    "])),(n()(),s["ɵted"](-1,null,["\n    "])),(n()(),s["ɵand"](16777216,null,null,1,null,o)),s["ɵdid"](119,802816,null,0,X.h,[s.ViewContainerRef,s.TemplateRef,s.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(n()(),s["ɵted"](-1,null,["\n  "])),(n()(),s["ɵted"](-1,2,["\n"])),(n()(),s["ɵted"](-1,null,["\n\n"])),(n()(),s["ɵeld"](123,0,null,null,61,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,Y.b,Y.a)),s["ɵdid"](124,4374528,null,0,nn.a,[S.a,ln.a,en.a,s.ElementRef,s.Renderer,T.a,tn.a,s.NgZone,[2,_.a],[2,A.a]],null,null),(n()(),s["ɵted"](-1,1,["\n  "])),(n()(),s["ɵeld"](126,0,null,1,57,"div",[["class","container"]],null,null,null,null,null)),(n()(),s["ɵted"](-1,null,["\n    "])),(n()(),s["ɵeld"](128,0,null,null,0,"div",[["id","map_canvas"]],null,null,null,null,null)),(n()(),s["ɵted"](-1,null,["\n    "])),(n()(),s["ɵeld"](130,0,null,null,52,"ion-fab",[["right",""],["top",""]],null,null,null,on.b,on.a)),s["ɵdid"](131,1228800,null,2,an.a,[ln.a],null,null),s["ɵqud"](335544320,18,{_mainButton:0}),s["ɵqud"](603979776,19,{_fabLists:1}),(n()(),s["ɵted"](-1,0,["\n      "])),(n()(),s["ɵeld"](135,0,null,0,5,"button",[["color","primary"],["ion-fab",""]],null,null,null,sn.b,sn.a)),s["ɵdid"](136,49152,[[18,4]],0,un.a,[S.a,s.ElementRef,s.Renderer],{color:[0,"color"]},null),(n()(),s["ɵted"](-1,0,["\n        "])),(n()(),s["ɵeld"](138,0,null,0,1,"ion-icon",[["name","add"],["role","img"]],[[2,"hide",null]],null,null,null,null)),s["ɵdid"](139,147456,null,0,x.a,[S.a,s.ElementRef,s.Renderer],{name:[0,"name"]},null),(n()(),s["ɵted"](-1,0,["\n      "])),(n()(),s["ɵted"](-1,0,["\n      "])),(n()(),s["ɵeld"](142,0,null,0,39,"ion-fab-list",[["side","bottom"]],null,null,null,null,null)),s["ɵdid"](143,16384,[[19,4]],1,rn.a,[s.ElementRef,s.Renderer,S.a,ln.a],null,null),s["ɵqud"](603979776,20,{_setbuttons:1}),(n()(),s["ɵted"](-1,null,["\n        "])),(n()(),s["ɵeld"](146,0,null,null,5,"button",[["ion-fab",""]],null,[[null,"click"]],function(n,l,e){var t=!0;if("click"===l){t=!1!==n.component.popupVehicles()&&t}return t},sn.b,sn.a)),s["ɵdid"](147,49152,[[20,4],[18,4]],0,un.a,[S.a,s.ElementRef,s.Renderer],null,null),(n()(),s["ɵted"](-1,0,["\n          "])),(n()(),s["ɵeld"](149,0,null,0,1,"ion-icon",[["name","car"],["role","img"]],[[2,"hide",null]],null,null,null,null)),s["ɵdid"](150,147456,null,0,x.a,[S.a,s.ElementRef,s.Renderer],{name:[0,"name"]},null),(n()(),s["ɵted"](-1,0,["\n        "])),(n()(),s["ɵted"](-1,null,["\n        "])),(n()(),s["ɵeld"](153,0,null,null,5,"button",[["ion-fab",""]],null,[[null,"click"]],function(n,l,e){var t=!0;if("click"===l){t=!1!==n.component.popupActors()&&t}return t},sn.b,sn.a)),s["ɵdid"](154,49152,[[20,4],[18,4]],0,un.a,[S.a,s.ElementRef,s.Renderer],null,null),(n()(),s["ɵted"](-1,0,["\n          "])),(n()(),s["ɵeld"](156,0,null,0,1,"ion-icon",[["name","people"],["role","img"]],[[2,"hide",null]],null,null,null,null)),s["ɵdid"](157,147456,null,0,x.a,[S.a,s.ElementRef,s.Renderer],{name:[0,"name"]},null),(n()(),s["ɵted"](-1,0,["\n        "])),(n()(),s["ɵted"](-1,null,["\n        "])),(n()(),s["ɵeld"](160,0,null,null,5,"button",[["ion-fab",""]],null,[[null,"click"]],function(n,l,e){var t=!0;if("click"===l){t=!1!==n.component.loadVictim()&&t}return t},sn.b,sn.a)),s["ɵdid"](161,49152,[[20,4],[18,4]],0,un.a,[S.a,s.ElementRef,s.Renderer],null,null),(n()(),s["ɵted"](-1,0,["\n          "])),(n()(),s["ɵeld"](163,0,null,0,1,"ion-icon",[["class","skull"],["role","img"]],[[2,"hide",null]],null,null,null,null)),s["ɵdid"](164,147456,null,0,x.a,[S.a,s.ElementRef,s.Renderer],null,null),(n()(),s["ɵted"](-1,0,["\n        "])),(n()(),s["ɵted"](-1,null,["\n        "])),(n()(),s["ɵeld"](167,0,null,null,5,"button",[["ion-fab",""]],null,[[null,"click"]],function(n,l,e){var t=!0;if("click"===l){t=!1!==n.component.popupSigns()&&t}return t},sn.b,sn.a)),s["ɵdid"](168,49152,[[20,4],[18,4]],0,un.a,[S.a,s.ElementRef,s.Renderer],null,null),(n()(),s["ɵted"](-1,0,["\n          "])),(n()(),s["ɵeld"](170,0,null,0,1,"ion-icon",[["name","warning"],["role","img"]],[[2,"hide",null]],null,null,null,null)),s["ɵdid"](171,147456,null,0,x.a,[S.a,s.ElementRef,s.Renderer],{name:[0,"name"]},null),(n()(),s["ɵted"](-1,0,["\n        "])),(n()(),s["ɵted"](-1,null,["\n        "])),(n()(),s["ɵeld"](174,0,null,null,5,"button",[["ion-fab",""]],null,[[null,"click"]],function(n,l,e){var t=!0;if("click"===l){t=!1!==n.component.loadPolygons()&&t}return t},sn.b,sn.a)),s["ɵdid"](175,49152,[[20,4],[18,4]],0,un.a,[S.a,s.ElementRef,s.Renderer],null,null),(n()(),s["ɵted"](-1,0,["\n          "])),(n()(),s["ɵeld"](177,0,null,0,1,"ion-icon",[["class","place"],["role","img"]],[[2,"hide",null]],null,null,null,null)),s["ɵdid"](178,147456,null,0,x.a,[S.a,s.ElementRef,s.Renderer],null,null),(n()(),s["ɵted"](-1,0,["\n        "])),(n()(),s["ɵted"](-1,null,["\n        "])),(n()(),s["ɵted"](-1,null,["\n      "])),(n()(),s["ɵted"](-1,0,["\n    "])),(n()(),s["ɵted"](-1,null,["\n  "])),(n()(),s["ɵted"](-1,1,["\n"])),(n()(),s["ɵted"](-1,null,["\n"]))],function(n,l){var e=l.component;n(l,8,0,"primary");n(l,12,0,"");n(l,17,0,"menu");n(l,35,0,"checkmark-circle");n(l,42,0,"trash");n(l,63,0,e.chosenVehicle);n(l,69,0,e.vehicles);n(l,88,0,e.chosenActor);n(l,94,0,e.actorNames);n(l,113,0,e.chosenSign);n(l,119,0,e.signs);n(l,136,0,"primary");n(l,139,0,"add");n(l,150,0,"car");n(l,157,0,"people");n(l,171,0,"warning")},function(n,l){n(l,7,0,s["ɵnov"](l,8)._hidden,s["ɵnov"](l,8)._sbPadding);n(l,10,0,s["ɵnov"](l,12).isHidden);n(l,16,0,s["ɵnov"](l,17)._hidden);n(l,34,0,s["ɵnov"](l,35)._hidden);n(l,41,0,s["ɵnov"](l,42)._hidden);n(l,59,0,s["ɵnov"](l,60)._disabled,s["ɵnov"](l,65).ngClassUntouched,s["ɵnov"](l,65).ngClassTouched,s["ɵnov"](l,65).ngClassPristine,s["ɵnov"](l,65).ngClassDirty,s["ɵnov"](l,65).ngClassValid,s["ɵnov"](l,65).ngClassInvalid,s["ɵnov"](l,65).ngClassPending);n(l,84,0,s["ɵnov"](l,85)._disabled,s["ɵnov"](l,90).ngClassUntouched,s["ɵnov"](l,90).ngClassTouched,s["ɵnov"](l,90).ngClassPristine,s["ɵnov"](l,90).ngClassDirty,s["ɵnov"](l,90).ngClassValid,s["ɵnov"](l,90).ngClassInvalid,s["ɵnov"](l,90).ngClassPending);n(l,109,0,s["ɵnov"](l,110)._disabled,s["ɵnov"](l,115).ngClassUntouched,s["ɵnov"](l,115).ngClassTouched,s["ɵnov"](l,115).ngClassPristine,s["ɵnov"](l,115).ngClassDirty,s["ɵnov"](l,115).ngClassValid,s["ɵnov"](l,115).ngClassInvalid,s["ɵnov"](l,115).ngClassPending);n(l,123,0,s["ɵnov"](l,124).statusbarPadding,s["ɵnov"](l,124)._hasRefresher);n(l,138,0,s["ɵnov"](l,139)._hidden);n(l,149,0,s["ɵnov"](l,150)._hidden);n(l,156,0,s["ɵnov"](l,157)._hidden);n(l,163,0,s["ɵnov"](l,164)._hidden);n(l,170,0,s["ɵnov"](l,171)._hidden);n(l,177,0,s["ɵnov"](l,178)._hidden)})}Object.defineProperty(l,"__esModule",{value:!0});var s=e(0),u=(e(1),e(27),e(159)),r=e(178),d=e(65),c=e(164),g=this&&this.__awaiter||function(n,l,e,t){return new(e||(e=Promise))(function(i,o){function a(n){try{u(t.next(n))}catch(n){o(n)}}function s(n){try{u(t.throw(n))}catch(n){o(n)}}function u(n){n.done?i(n.value):new e(function(l){l(n.value)}).then(a,s)}u((t=t.apply(n,l||[])).next())})},p=this&&this.__generator||function(n,l){function e(e){return function(a){return function(e){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,i&&(o=i[2&e[0]?"return":e[0]?"throw":"next"])&&!(o=o.call(i,e[1])).done)return o;switch(i=0,o&&(e=[0,o.value]),e[0]){case 0:case 1:o=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,i=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!(o=o.length>0&&o[o.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!o||e[1]>o[0]&&e[1]<o[3])){s.label=e[1];break}if(6===e[0]&&s.label<o[1]){s.label=o[1],o=e;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(e);break}o[2]&&s.ops.pop(),s.trys.pop();continue}e=l.call(n,s)}catch(n){e=[6,n],i=0}finally{t=o=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,a])}}var t,i,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},m=function(){function n(n,l,e,t,i,o,a,s,u,r){this.navCtrl=n,this.zone=l,this.app=e,this.viewCtrl=t,this.geolocation=i,this.http=o,this.navParams=a,this.alertCtrl=s,this.popoverCtrl=u,this.toastCtrl=r,this.signs=["Sinal STOP","Semáforo","Sinal proibido","Sentido único","Cedência passagem","Passadeira","Estacionamento","Estacionamento proibido","Proibido virar esquerda","Proibido virar direita","Rotunda","Passagem de nível"],this.signDictionary={"Sinal STOP":"../assets/imgs/croquiItens/signs/stop.png","Semáforo":"../assets/imgs/croquiItens/signs/traffic-light.png","Sinal proibido":"../assets/imgs/croquiItens/signs/forbidden-sign.png","Sentido único":"../assets/imgs/croquiItens/signs/one-way.png","Cedência passagem":"../assets/imgs/croquiItens/signs/yield.png",Passadeira:"../assets/imgs/croquiItens/signs/crosswalk.png",Estacionamento:"../assets/imgs/croquiItens/signs/parkSign.png","Estacionamento proibido":"../assets/imgs/croquiItens/signs/noParking.png","Proibido virar esquerda":"../assets/imgs/croquiItens/signs/noLeftTurn.png","Proibido virar direita":"../assets/imgs/croquiItens/signs/noRightTurn.png",Rotunda:"../assets/imgs/croquiItens/signs/roundabout.png","Passagem de nível":"../assets/imgs/croquiItens/signs/railwayCrossing.png"},this.signTypes={"Sinal STOP":"stop","Semáforo":"trafficLight","Sinal proibido":"forbidden","Sentido único":"oneWay","Cedência passagem":"yield",Passadeira:"crosswalk",Estacionamento:"parkSign","Estacionamento proibido":"noPark","Proibido virar esquerda":"noLeftTurn","Proibido virar direita":"noRightTurn",Rotunda:"roundabout","Passagem de nível":"railwayCrossing"},this.signTypesInverted={stop:"Sinal STOP",trafficLight:"Semáforo",forbidden:"Sinal proibido",oneWay:"Sentido único",yield:"Cedência passagem",crosswalk:"Passadeira",parkSign:"Estacionamento",noPark:"Estacionamento proibido",noLeftTurn:"Proibido virar esquerda",noRightTurn:"Proibido virar direita",roundabout:"Rotunda",railwayCrossing:"Passagem de nível"},this.geoJSON=[],this.polygonPoints=[],this.markerList=[],this.id=this.navParams.data}return n.prototype.ionViewDidLoad=function(){this.loadMap()},n.prototype.confirmDelete=function(){var n=this;this.alertCtrl.create({title:"Limpar mapa?",message:"Esta ação é irreversível. Toda a informação presente neste croqui será apagada.",buttons:[{text:"Cancelar",role:"cancel"},{text:"Eliminar",handler:function(){n.map.clear(),n.polygonPoints=[],n.markerList=[],console.log("ID ACC:"+n.id),n.http.put("https://sgs-backend.herokuapp.com/api/accidents/"+n.id,{sketch:""}).subscribe(function(l){console.log("deleted with success");n.toastCtrl.create({position:"top",message:"Croqui apagado com sucesso!",duration:3e3}).present()},function(n){console.log(n)})}}]}).present()},n.prototype.popupVehicles=function(){if(this.vehicles.length>0)this.vehicleRef.open();else{this.toastCtrl.create({position:"top",message:"Não existem veículos registados neste sinistro!",duration:3e3}).present()}},n.prototype.popupSigns=function(){this.signRef.open()},n.prototype.popupActors=function(){if(this.actors.length>0)this.actorRef.open();else{this.toastCtrl.create({position:"top",message:"Não existem intervenientes registados neste sinistro!",duration:3e3}).present()}},n.prototype.onOkSign=function(n){switch(n){case"Passadeira":this.onOkCrosswalk();break;default:var l=this.map.addMarkerSync({position:{lat:this.latitude,lng:this.longitude},draggable:!0,icon:{url:this.signDictionary[n],type:this.signTypes[n]}});this.map.setCameraTarget(l.getPosition()),this.markerList.push(l),console.log("array: "+this.markerList)}},n.prototype.onOkVehicle=function(n){var l=this;this.vehicles.forEach(function(e){if(e.meta.register===n){console.log("ID QUE ENVIO: "+e.id),l.choosePin("../assets/imgs/croquiItens/carroCroqui/carroCroquiHighRes.png",e.meta.color,e.id,"$event")}})},n.prototype.onOkCrosswalk=function(){this.choosePin("../assets/imgs/croquiItens/signs/crosswalkHighRes.png","","","$event")},n.prototype.onOkActor=function(n){var l=this;this.actors.forEach(function(e){if(e.person.name==n){var t=l.map.addMarkerSync({position:{lat:l.latitude,lng:l.longitude},draggable:!0,icon:{url:"../assets/imgs/croquiItens/signs/actor.png",type:"actor",idActor:e.id}});l.map.setCameraTarget(t.getPosition()),l.markerList.push(t),console.log("array: "+l.markerList)}})},n.prototype.loadMap=function(){return g(this,void 0,void 0,function(){var n=this;return p(this,function(l){switch(l.label){case 0:return[4,this.http.get("https://sgs-backend.herokuapp.com/api/accidents/"+this.id).map(function(n){return n.json()}).subscribe(function(l){n.position=l.position,n.vehicles=l.vehicles,n.geoJSON=l.sketch,n.actors=l.actors,n.actorNames=l.actors?l.actors.map(function(n){return n.person.name}):[];var e={camera:{target:{lat:n.position[0],lng:n.position[1]},zoom:18}};n.latitude=n.position[0],n.longitude=n.position[1],n.map=c.b.create("map_canvas",e),""!=n.geoJSON&&n.geoJSON!={}&&n.geoJSON!=[]&&null!=n.geoJSON?n.loadSketch():console.log("SKETCH VAZIO!")},function(n){console.log(n)})];case 1:return l.sent(),[2]}})})},n.prototype.loadCustomMarker=function(n,l,e,t){console.log(n+" | "+l+" | "+e+" | "+t);var i,o;console.log("TIPO: "+t.split(":")[0]),"carroCroquiHighRes,"==t.split(":")[0]?o=parseInt(t.split(":")[1]):i=parseInt(t.split(":")[1]),console.log("idV: "+o+" | idA: "+i);var a=this.map.addMarkerSync({position:{lat:this.latitude,lng:this.longitude},draggable:!0,icon:{url:n,fillColor:l,idVehicle:o,idActor:i,rotation:e}});this.map.setCameraTarget(a.getPosition()),this.markerList.push(a)},n.prototype.loadVictim=function(){var n;if(this.actors.forEach(function(l){"Dead"==l.wounds&&(n=!0)}),n){var l=this.map.addMarkerSync({position:{lat:this.latitude,lng:this.longitude},draggable:!0,icon:{url:"../assets/imgs/croquiItens/body/body.png",type:"victim"}});this.map.setCameraTarget(l.getPosition()),this.markerList.push(l)}else{this.toastCtrl.create({position:"top",message:"Não existem vítimas registadas neste sinistro!",duration:3e3}).present()}},n.prototype.loadRadiusCircle=function(){var n={lat:this.latitude,lng:this.longitude};this.map.setCameraTarget(n);var l=[0,90,180,270].map(function(l){return c.e.computeOffset(n,150,l)}),e=this.map.addMarkerSync({position:l[0],draggable:!0}),t=this.map.addCircleSync({center:n,radius:150,strokeColor:"#AA00FF",strokeWidth:5,fillColor:"#00880055"});e.on("position_changed").subscribe(function(l){var e=c.e.computeDistanceBetween(n,l[1]);t.setRadius(e)})},n.prototype.loadPolygons=function(){var n=this;this.map.setCameraTarget({lat:this.latitude,lng:this.longitude}),this.polygonPoints=[],this.polygonPoints.push({lat:this.latitude+5e-4,lng:this.longitude+75e-5}),this.polygonPoints.push({lat:this.latitude+5e-4,lng:this.longitude-75e-5}),this.polygonPoints.push({lat:this.latitude-5e-4,lng:this.longitude-75e-5}),this.polygonPoints.push({lat:this.latitude-5e-4,lng:this.longitude+75e-5});var l=this.map.addPolygonSync({points:this.polygonPoints,strokeColor:"#AA00FF",fillColor:"#00FFAA",strokeWidth:10}).getPoints();l.forEach(function(e,t){n.map.addMarkerSync({draggable:!0,position:e}).on(c.c.MARKER_DRAG).subscribe(function(e){l.setAt(t,e[0]),n.polygonPoints=l.getArray()})})},n.prototype.loadSavedPolygon=function(n){var l=this,e=[];n.forEach(function(n){e.push({lat:n[0],lng:n[1]})}),this.map.setCameraTarget({lat:this.latitude,lng:this.longitude}),this.polygonPoints=e;var t=this.map.addPolygonSync({points:this.polygonPoints,strokeColor:"#AA00FF",fillColor:"#00FFAA",strokeWidth:10}).getPoints();t.forEach(function(n,e){l.map.addMarkerSync({draggable:!0,position:n}).on(c.c.MARKER_DRAG).subscribe(function(n){t.setAt(e,n[0]),l.polygonPoints=t.getArray()})})},n.prototype.presentPopover=function(n){var l=this,e=this.popoverCtrl.create(r.a,{pinType:this.chosenPin,color:this.color,customID:this.customID});e.present({ev:n}),e.onDidDismiss(function(n){var e=n.url.split("HighRes.png")[0]+n.angle+".png",t=n.url.split("/")[5].split(".png")+":"+n.customID;l.loadCustomMarker(e,n.color,n.angle,t)})},n.prototype.choosePin=function(n,l,e,t){this.chosenPin=n,this.color=l,this.customID=e,console.log("choosePin("+n+","+l+","+e+")"),this.presentPopover(t)},n.prototype.undoLast=function(){console.log("before:"+this.markerList.length),this.markerList=this.markerList.splice(this.markerList.length-1,1),console.log("after:"+this.markerList.length),console.log("SECOND"),this.markerList.forEach(function(n){console.log(n)})},n.prototype.zoomListener=function(){var n=this;this.map.clear();var l,e;l=1/(18/this.map.getCameraZoom()),this.markerList.forEach(function(t){t.disableAutoPan=!0,e=n.map.getCameraZoom()>=15?t.icon.url:"../assets/imgs/croquiItens/signs/crash.png";n.map.addMarkerSync(t).setIcon({url:e,size:new google.maps.Size(l*t.icon.size.width,l*t.icon.size.height)})})},n.prototype.loadSketch=function(){var n=this;this.map.clear();var l=new c.d;this.geoJSON.features.forEach(function(e){console.log(e);var t;if("polygon"!=e.properties.type){"car"==e.properties.type?("car",t="../assets/imgs/croquiItens/carroCroqui/carroCroqui"+e.properties.rotation+".png",n.http.get("https://sgs-backend.herokuapp.com/api/accidents/"+n.id+"/vehicles/"+parseInt(e.properties.idVehicle)).map(function(n){return n.json()}).subscribe(function(n){l.setContent('<div style="width: 300px;"><ul><li>Tipo: '+n.meta.type+"</li><li>Matrícula: "+n.meta.register+"</li><li>Marca: "+n.meta.make+"</li><li>Modelo: "+n.meta.model+"</li><li>Ano: "+n.meta.year+"</li></ul></div>")})):t="crosswalk"==e.properties.type?"../assets/imgs/croquiItens/signs/crosswalk"+e.properties.rotation+".png":"victim"==e.properties.type?"../assets/imgs/croquiItens/body/body.png":"actor"==e.properties.type?"../assets/imgs/croquiItens/signs/actor.png":n.signDictionary[n.signTypesInverted[e.properties.type]];n.map.addMarker({position:{lat:e.geometry.coordinates[0],lng:e.geometry.coordinates[1]},draggable:!0,icon:{url:t,type:n.signTypesInverted[e.properties.type]}}).then(function(n){n.on(c.c.MARKER_CLICK).subscribe(function(){l.open(n)})});n.map.setCameraTarget({lat:n.latitude,lng:n.longitude})}else console.log("!!!! DEVE SER POLIGONO !!!!"),console.log(JSON.stringify(e.geometry.coordinates)),n.loadSavedPolygon(e.geometry.coordinates)})},n.prototype.saveSketch=function(){var n,l=this,e={type:"FeatureCollection",features:[]};if(this.markerList.forEach(function(l){var t=l.get("icon");switch(console.log("------ITERACAO------\n"+JSON.stringify(t)),t.url){case"../assets/imgs/croquiItens/body/body.png":n="victim";break;case"../assets/imgs/croquiItens/signs/forbidden-sign.png":n="forbidden";break;case"../assets/imgs/croquiItens/signs/one-way.png":n="oneWay";break;case"../assets/imgs/croquiItens/signs/stop.png":n="stop";break;case"../assets/imgs/croquiItens/signs/traffic-light.png":n="trafficLight";break;case"../assets/imgs/croquiItens/signs/yield.png":n="yield";break;case"../assets/imgs/croquiItens/signs/actor.png":n="actor";break;case"../assets/imgs/croquiItens/signs/noParking.png":n="noPark";break;case"../assets/imgs/croquiItens/signs/parkSign.png":n="parkSign";break;case"../assets/imgs/croquiItens/signs/noRightTurn.png":n="noRightTurn";break;case"../assets/imgs/croquiItens/signs/noLeftTurn.png":n="noLeftTurn";break;case"../assets/imgs/croquiItens/signs/roundabout.png":n="roundabout";break;case"../assets/imgs/croquiItens/signs/railwayCrossing.png":n="railwayCrossing";break;case"../assets/imgs/croquiItens/carroCroqui/carroCroqui"+t.rotation+".png":n="car";break;case"../assets/imgs/croquiItens/signs/crosswalk"+t.rotation+".png":n="crosswalk"}var i={type:"Feature",geometry:{type:"Point",coordinates:[l.getPosition().lat,l.getPosition().lng]},properties:{idVehicle:t.idVehicle,idActor:t.idActor,type:n,rotation:t.rotation,color:t.fillColor}};e.features.push(i)}),console.log("debug:"+JSON.stringify(this.polygonPoints)),this.polygonPoints.length>0){var t=[];this.polygonPoints.forEach(function(n){t.push([n.lat,n.lng])}),console.log("HA POLIGONO");e.features.push({type:"Feature",geometry:{type:"Polygon",coordinates:t},properties:{type:"polygon"}})}else console.log("NAO HA POLIGONO");console.log("\n\n FIM \n\n"+JSON.stringify(e)),this.http.put("https://sgs-backend.herokuapp.com/api/accidents/"+this.id,{sketch:e}).subscribe(function(n){console.log("success");l.toastCtrl.create({position:"top",message:"Croqui guardado com sucesso!",duration:3e3}).present()},function(n){console.log(n)})},n}(),h=function(){return function(){}}(),f=e(249),v=e(250),b=e(251),y=e(252),k=e(253),R=e(254),C=e(255),P=e(256),E=e(257),q=e(101),I=e(66),S=e(2),_=e(6),w=e(150),O=e(37),T=e(11),A=e(23),L=e(41),M=e(22),D=e(158),V=e(33),N=e(152),F=e(53),x=e(47),J=e(258),j=e(68),H=e(151),z=e(19),G=e(16),W=e(54),K=e(67),Z=e(58),$=e(402),U=e(156),B=e(21),Q=e(20),X=e(15),Y=e(149),nn=e(28),ln=e(5),en=e(12),tn=e(32),on=e(400),an=e(155),sn=e(401),un=e(70),rn=e(106),dn=e(14),cn=e(99),gn=e(108),pn=e(98),mn=s["ɵcrt"]({encapsulation:2,styles:[],data:{}}),hn=s["ɵccf"]("page-sketch",m,function(n){return s["ɵvid"](0,[(n()(),s["ɵeld"](0,0,null,null,1,"page-sketch",[],null,null,null,a,mn)),s["ɵdid"](1,49152,null,0,m,[A.a,s.NgZone,T.a,_.a,u.a,d.e,dn.a,cn.a,gn.a,pn.a],null,null)],null,null)},{},{},[]),fn=e(148),vn=e(52);e.d(l,"SketchPageModuleNgFactory",function(){return bn});var bn=s["ɵcmf"](h,[],function(n){return s["ɵmod"]([s["ɵmpd"](512,s.ComponentFactoryResolver,s["ɵCodegenComponentFactoryResolver"],[[8,[f.a,v.a,b.a,y.a,k.a,R.a,C.a,P.a,E.a,hn]],[3,s.ComponentFactoryResolver],s.NgModuleRef]),s["ɵmpd"](4608,X.k,X.j,[s.LOCALE_ID,[2,X.s]]),s["ɵmpd"](4608,Q.t,Q.t,[]),s["ɵmpd"](4608,Q.d,Q.d,[]),s["ɵmpd"](512,X.b,X.b,[]),s["ɵmpd"](512,Q.r,Q.r,[]),s["ɵmpd"](512,Q.g,Q.g,[]),s["ɵmpd"](512,Q.o,Q.o,[]),s["ɵmpd"](512,fn.a,fn.a,[]),s["ɵmpd"](512,fn.b,fn.b,[]),s["ɵmpd"](512,h,h,[]),s["ɵmpd"](256,vn.a,m,[])])})},400:function(n,l,e){"use strict";function t(n){return i["ɵvid"](0,[i["ɵncd"](null,0)],null,null)}e.d(l,"a",function(){return o}),l.b=t;var i=e(0),o=(e(5),i["ɵcrt"]({encapsulation:2,styles:[],data:{}}))},401:function(n,l,e){"use strict";function t(n){return i["ɵvid"](2,[(n()(),i["ɵeld"](0,0,null,null,1,"ion-icon",[["class","fab-close-icon"],["name","close"],["role","img"]],[[2,"hide",null]],null,null,null,null)),i["ɵdid"](1,147456,null,0,o.a,[a.a,i.ElementRef,i.Renderer],{name:[0,"name"]},null),(n()(),i["ɵeld"](2,0,null,null,1,"span",[["class","button-inner"]],null,null,null,null,null)),i["ɵncd"](null,0),(n()(),i["ɵeld"](4,0,null,null,0,"div",[["class","button-effect"]],null,null,null,null,null))],function(n,l){n(l,1,0,"close")},function(n,l){n(l,0,0,i["ɵnov"](l,1)._hidden)})}e.d(l,"a",function(){return s}),l.b=t;var i=e(0),o=e(47),a=e(2),s=i["ɵcrt"]({encapsulation:2,styles:[],data:{}})},402:function(n,l,e){"use strict";function t(n){return a["ɵvid"](0,[(n()(),a["ɵeld"](0,0,null,null,1,"div",[["class","select-placeholder select-text"]],null,null,null,null,null)),(n()(),a["ɵted"](1,null,["",""]))],null,function(n,l){n(l,1,0,l.component.placeholder)})}function i(n){return a["ɵvid"](0,[(n()(),a["ɵeld"](0,0,null,null,1,"div",[["class","select-text"]],null,null,null,null,null)),(n()(),a["ɵted"](1,null,["",""]))],null,function(n,l){var e=l.component;n(l,1,0,e.selectedText||e._text)})}function o(n){return a["ɵvid"](0,[(n()(),a["ɵand"](16777216,null,null,1,null,t)),a["ɵdid"](1,16384,null,0,s.i,[a.ViewContainerRef,a.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),a["ɵand"](16777216,null,null,1,null,i)),a["ɵdid"](3,16384,null,0,s.i,[a.ViewContainerRef,a.TemplateRef],{ngIf:[0,"ngIf"]},null),(n()(),a["ɵeld"](4,0,null,null,1,"div",[["class","select-icon"]],null,null,null,null,null)),(n()(),a["ɵeld"](5,0,null,null,0,"div",[["class","select-icon-inner"]],null,null,null,null,null)),(n()(),a["ɵeld"](6,0,null,null,1,"button",[["aria-haspopup","true"],["class","item-cover"],["ion-button","item-cover"],["type","button"]],[[8,"id",0],[1,"aria-labelledby",0],[1,"aria-disabled",0]],null,null,u.b,u.a)),a["ɵdid"](7,1097728,null,0,r.a,[[8,"item-cover"],d.a,a.ElementRef,a.Renderer],null,null)],function(n,l){var e=l.component;n(l,1,0,!e._text);n(l,3,0,e._text)},function(n,l){var e=l.component;n(l,6,0,e.id,e._labelId,e._disabled)})}e.d(l,"a",function(){return c}),l.b=o;var a=e(0),s=e(15),u=e(41),r=e(22),d=e(2),c=(e(16),e(21),a["ɵcrt"]({encapsulation:2,styles:[],data:{}}))}});